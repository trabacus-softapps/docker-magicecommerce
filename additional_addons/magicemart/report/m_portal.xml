<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>
        <menuitem name="Customer" id="menu_magicemart_customer"   sequence="501"  />
        <menuitem name="Customer" id="menu_portal_customer"   parent="menu_magicemart_customer" sequence="1"  />
        
        
        <record id="magicemart_request_product_tree" model="ir.ui.view">
            <field name="name">magicemart_request_product_tree</field>
            <field name="model">m.portal.request</field>
            <field name="arch" type="xml">
                <tree string="Request Product">
                    <field name="product_id" />
                    <field name="product_uom_qty"/>
                    <field name="emp_name" />
                    <field name="emp_no" />
                    <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record id="magicemart_request_product_form" model="ir.ui.view">
            <field name="name">magicemart_request_product_form</field>
            <field name="model">m.portal.request</field>
            <field name="arch" type="xml">
                <form string="Request Product" version="7.0">
                    <header>
                        <button name="get_product_request" states="draft" string="Submit"  type="object" class="oe_highlight" />
                        <field name="state" widget="statusbar" nolabel="1" statusbar_visible="draft,done" statusbar_colors='{"draft":"blue","done":"blue"}'/>
                    </header>
                    <sheet>
                        <group col="4" colspan="2">
                            <field name="product_id" attrs="{'readonly':[('state','=','done')]}"/>
                            <field name="product_uom_qty" attrs="{'readonly':[('state','=','done')]}"/>
                            <field name="emp_name" attrs="{'readonly':[('state','=','done')]}"/>
                            <field name="emp_no" attrs="{'readonly':[('state','=','done')]}"/>
                            <field name="user_id"  invisible= "1" />
                            <field name="partner_id"   invisible= "1" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        
        <record id="action_magicemart_request_product" model="ir.actions.act_window">
            <field name="name">Request Product</field>
            <field name="res_model">m.portal.request</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <menuitem name="Request" id="menu_portal_customer_request"  action="action_magicemart_request_product" parent="menu_portal_customer"  sequence="4" groups="magicemart.magicemart_portal_user" />
        
    </data>
</openerp>    