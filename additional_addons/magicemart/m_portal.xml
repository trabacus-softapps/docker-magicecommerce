<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>
        
        
        <menuitem icon="terp-project" name="Customer Portal Admin" id="menu_magicemart_customer" sequence="501"  groups="magicemart.magicemart_portal_manager,magicemart.magicemart_portal_user" />
        <menuitem name="Customer Portal" id="menu_portal_customer" parent="menu_magicemart_customer" sequence="1" groups="magicemart.magicemart_portal_manager,magicemart.magicemart_portal_user" />
        
        <menuitem name="Customer Portal Admin" id="menu_portal_customer_admin" parent="menu_magicemart_customer" sequence="2" groups="magicemart.magicemart_portal_manager" />
        
        
        <menuitem name="Customer Portal Employee" id="portal_customer_employee" parent="menu_magicemart_customer" sequence="1" groups="magicemart.magicemart_portal_manager,magicemart.magicemart_portal_user" />
        
        
        <menuitem name="Reports" id="portal_customer_reports" parent="menu_magicemart_customer" sequence="3" groups="magicemart.magicemart_portal_manager" />

        <menuitem name="Supplier" id="menu_magicemart_supplier"   sequence="502"  groups="magicemart.magicemart_supplier_portal" />
        <menuitem name="Supplier" id="menu_supplier_portal" parent="menu_magicemart_supplier" sequence="1"  groups="magicemart.magicemart_supplier_portal" />

        <menuitem name="Reports" id="menu_supplier_sales_analysis" parent="menu_magicemart_supplier" sequence="2"  groups="magicemart.magicemart_supplier_portal" />

        <menuitem name="Products" id="menu_portal_customer_products" parent="portal_customer_employee" action="magicemart.action_portal_product" sequence="3" groups="magicemart.magicemart_portal_manager,magicemart.magicemart_portal_user" />
        
        <record id="magicemart_request_product_tree" model="ir.ui.view">
            <field name="name">magicemart_request_product_tree</field>
            <field name="model">m.portal.request</field>
            <field name="arch" type="xml">
                <tree string="Request Product">
                    <field name="emp_name" />
                    <field name="emp_no" />
                    <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record id="magicemart_request_product_form" model="ir.ui.view">
            <field name="name">magicemart_request_product_form</field>
            <field name="model">m.portal.request</field>
            <field name="arch" type="xml">
                <form string="Request Product" version="7.0">
                    <header>
                        <button name="get_product_request" states="draft" string="Submit"  type="object" class="oe_highlight" />
                        <field name="state" widget="statusbar" nolabel="1" statusbar_visible="draft,done" statusbar_colors='{"draft":"blue","done":"blue"}'/>
                    </header>
                    <sheet>
                        <group col="4" colspan="2">
                            <field name="emp_name" attrs="{'readonly':[('state','=','done')]}"/>
                            <field name="emp_no" attrs="{'readonly':[('state','=','done')]}"/>
                            <field name="user_id"  invisible= "1" />
                            <field name="partner_id"   invisible= "1" />
                        </group>
                        <separator string="Products"/>
                        <field name="product_ids" widget="one2many_list" nolabel="1" attrs="{'readonly':[('state','=','done')]}" >
                            <tree string=" Product Lines" editable="top">
                                <field name="product_id"/>
                                <field name="product_qty"/>
                            </tree>
                        </field>
                    </sheet>
                </form>
            </field>
        </record>
        
        <record id="action_magicemart_request_product" model="ir.actions.act_window">
            <field name="name">Request Product</field>
            <field name="res_model">m.portal.request</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            
        </record>
        
        <menuitem name="Request" id="menu_portal_customer_request"  action="action_magicemart_request_product" parent="portal_customer_employee"  sequence="4" groups="magicemart.magicemart_portal_user" />
        
        
        
<!--  Delivery Orders       -->

        <record id="m_view_picking_out_form" model="ir.ui.view">
            <field name="name">m.stock.picking.out.form</field>
            <field name="model">stock.picking.out</field>
            <field name="inherit_id" ref="stock.view_picking_out_form"/>
            <field name="arch" type="xml">
                <xpath expr="/form/header//button[@name='draft_validate']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
            </field>
        </record>
        
        <menuitem action="stock.action_picking_tree" id="m_menu_action_picking_tree" parent="menu_portal_customer_admin"  name="Delivery Orders" sequence="1"/>
        
        
        
<!-- Customer Portal Returned DO's (i.e., Incomingshipment)       -->
        
        <record id="m_return_incmoingshipment" model="ir.actions.act_window">
            <field name="name">Delivery Order Returns</field>
            <field name="res_model">stock.picking.in</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('return_st','=',True)]</field>
            <field name="context">{'contact_display': 'partner_address', 'default_type': 'in'}</field>
            <field name="search_view_id" ref="stock.view_picking_in_search"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create an incoming shipment. 
                </p><p>
                    The Incoming Shipments is the list of all orders you will
                    receive from your suppliers. An incoming shipment contains a
                    list of products to be received according to the original
                    purchase order.
                </p>
            </field>
        </record>
        <record id="m_action_invoice_tree5_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="stock.view_picking_in_tree"/>
            <field name="act_window_id" ref="m_return_incmoingshipment"/>
        </record>
        <record id="m_action_invoice_tree5_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="stock.view_picking_in_form"/>
            <field name="act_window_id" ref="m_return_incmoingshipment"/>
        </record>
        <record id="m_action_invoice_tree5_view2_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="view_id" ref="stock.stock_picking_in_calendar"/>
            <field name="act_window_id" ref="m_return_incmoingshipment"/>
        </record>
        
                
        <menuitem action="m_return_incmoingshipment" id="m_picking_tree" parent="menu_portal_customer_admin"  name="Customer Return" sequence="2" groups="magicemart.magicemart_portal_manager,base.group_system"/>
        
    </data>
</openerp>    