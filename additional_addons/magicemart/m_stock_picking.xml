<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
      
        <!-- Adding partner_id field  in Stock Location Master -->
        
        <record id="m_view_location_form" model="ir.ui.view">
            <field name="name">m.stock.location.form</field>
            <field name="model">stock.location</field>
            <field name="inherit_id" ref="stock.view_location_form"/>
            <field name="arch" type="xml">
                <field name="partner_id" position="attributes">
                    <attribute name="string">Customer</attribute>
                </field>
            </field>
        </record>
      
        
<!-- Adding DC No in Delivery Product Tree       -->
                
        <record id="m_view_move_tree_reception_picking" model="ir.ui.view">
            <field name="name">stock.move.tree2</field>
            <field name="model">stock.move</field>
            <field name="priority" eval="6"/>
            <field name="inherit_id" ref="stock.view_move_tree_reception_picking"/>
            <field name="arch" type="xml">
                
                <xpath expr="//tree[@string='Moves']/field[@name='picking_id']" position="attributes">
                    <attribute name="invisible">0</attribute>
                    <attribute name="string">DC No.</attribute>
                </xpath>
            </field>
        </record>                
        
        <record id="m_view_picking_out_form" model="ir.ui.view">
            <field name="name">m.stock.picking.out.form</field>
            <field name="model">stock.picking.out</field>
            <field name="inherit_id" ref="stock.view_picking_out_form"/>
            <field name="arch" type="xml">
                <field name="partner_id" position = "after">
                    <field name="contact_id" domain="[('parent_id','=',partner_id)]" attrs="{'readonly':[('state','in','done')]}"/>
                </field>
                <xpath expr="/form/header//button[@string='Print Delivery Slip']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <button name="button_cancel" position="after">
                    <button name="%(action_delivery_challan)d" type="action" string="Print Delivery Challan" class="oe_highlight"/>
                </button>
            </field>
        </record>

        <record id="m_view_picking_withcarrier_out_form" model="ir.ui.view">
            <field name="name">m_delivery.stock.picking_withcarrier.out.form.view</field>
            <field name="model">stock.picking.out</field>
            <field name="inherit_id" ref="delivery.view_picking_withcarrier_out_form"/>
            <field name="arch" type="xml">
                <field name="carrier_tracking_ref" position="attributes">
                <attribute name="string">Customer PO Reference</attribute>
                    <attribute name="attrs">{'readonly':[('state','in','done')]}</attribute>
                    <attribute name="required">1</attribute>
                </field>
                <field name="number_of_packages" position="before">
                    <field name="vehicle" required="1"/>
                </field>
                <field name="number_of_packages" position="attributes">
                    <attribute name="invisible">1</attribute>
                    <attribute name="attrs">{'readonly':[('state','in','done')]}</attribute>
                </field>
                <field name="carrier_id" position="attributes">
                    <attribute name="invisible">1</attribute>
                    <attribute name="attrs">{'readonly':[('state','in','done')]}</attribute>
                </field>
            </field>
        </record>
        
    <!--        TO remove standard Print Report button functionalities -->
        <record id="m_view_delivery_order_inherit_stock" model="ir.ui.view">
            <field name="name">m.stock.picking.out.form</field>
            <field name="model">stock.picking.out</field>
            <field name="inherit_id" ref= "delivery.view_delivery_order_inherit_stock"/>
            <field name="arch" type="xml">
                <button states = "confirmed,assigned" position="attributes">
                    <attribute name="invisible">1</attribute> 
                </button>
                <xpath expr="//button[@states='done']" position = "attributes">
                
                    <attribute name="invisible">1</attribute>
                </xpath>
                
            </field>
        </record>
        
<!--     To Add Available qty & Product Image in Stock move         -->
        
            <record id="m_view_move_picking_form" model="ir.ui.view">
                <field name="name">m.stock.move.form</field>
                <field name="model">stock.move</field>
                <field name="inherit_id" ref="stock.view_move_picking_form"/>
                <field name="arch" type="xml">
                    <field name="product_packaging" position="after">
                        <field name="available_qty" readonly="1" />
                    </field>
                    <field name="product_packaging" position="attributes">
                        <attribute name="invisible">1</attribute>
                    </field>
                    <field name="available_qty" position="after">
                        <field name="product_image" readonly="1" widget="image" class="oe_avatar oe_left"/>
                    </field>
                    <field name="location_id" position="attributes">
                        <attribute name="on_change">onchange_location_id(location_id, location_dest_id)</attribute>
                    </field>
                    <field name="location_dest_id" position="attributes">
                        <attribute name="on_change">onchange_location_id(location_id, location_dest_id)</attribute>
                    </field>
                    <group string="Locations" position="attributes">
                        <attribute name="colspan">2</attribute>
                        <attribute name="coln">2</attribute>
                    </group>
                    
                                
                </field>
        </record>
        
<!--  Stock Picking in Form      -->
        <record id="m_view_picking_in_form" model="ir.ui.view">
            <field name="name">m.stock.picking.in.form</field>
            <field name="model">stock.picking.in</field>
            <field name="inherit_id" ref="stock.view_picking_in_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_process']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@name='button_cancel']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@string='Return Products']" position="replace">
                    <button name="%(stock.act_stock_return_picking)d" string="Return Products" states="done" type="action" context="{'picking_id':active_id}"/>
                </xpath>
                
            </field>
        </record>
        
        
        

<!-- Creating Terms and Conditions Tab-->
        
        <record id="m_view_picking_form" model="ir.ui.view">
            <field name="name">m.stock.picking.form</field>
            <field name="model">stock.picking.in</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook/page[@string='Additional Info']" position="after">
                    <page string="Terms and Conditions">
                        <form string="Terms and Conditions">
                            <field name="terms" placeholders="Terms and Conditions..."/>

                        </form>
                    </page>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="return_st" invisible="1"/>
                </xpath>
                
                <xpath expr="//button[@name='action_process']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>


                
            </field>
        </record>
        
<!--   Stock Picking     -->
        <record id="m_view_picking_form" model="ir.ui.view">
            <field name="name">m.stock.picking.form</field>
            <field name="model">stock.picking.out</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook/page[@string='Additional Info']" position="after">
                    <page string="Terms and Conditions">
                        <form string="Terms and Conditions">
                            <field name="terms" placeholders="Terms and Conditions..."/>
                        </form>
                    </page>
                </xpath>
                <xpath expr="//button[@name='draft_force_assign']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                <xpath expr="//button[@name='draft_validate']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                <xpath expr="//button[@string='Create Invoice/Refund']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                <xpath expr="//button[@string='Cancel Transfer']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                <xpath expr="//button[@name='action_assign']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@name='force_assign']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@name='action_process']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@name='button_cancel']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>



                
            </field>
        </record>
        
               
        
        <record id="m_view_move_withweight_form" model="ir.ui.view">
            <field name="name">m.stock.move.form.weight</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="delivery.view_move_withweight_form"/>
            <field name="arch" type="xml">
                <xpath expr="//div/field[@name='weight']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='weight_net']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
               
                
            </field>
        </record>
        
<!-- Stock Picking        -->
        
        <record id="m_view_picking_form" model="ir.ui.view">
            <field name="name">m.stock.picking.form</field>
            <field name="model">stock.picking</field>
            <field eval="12" name="priority"/>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook/page[@string='Products']" position="attributes">
                    <attribute name="context">{'type':1 }</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="after">
                </xpath>
                
                <xpath expr="//button[@name='action_process']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@name='action_process']" position="after">
                    <button name="stock_internal_transfer" type="object" String="Print Stock Transfer" class="oe_highlight" groups="base.group_user,magicemart.magicemart_portal_manager"
                        attrs="{'invisible':[('type','not in','internal')]}"/>
                </xpath>

                
            </field>
        </record>
        
<!-- Stock Picking Out Inherited       -->
        <record id="m_view_picking_out_form" model="ir.ui.view">
            <field name="name">m.stock.picking.out.form</field>
            <field name="model">stock.picking.out</field>
            <field name="inherit_id" ref="stock.view_picking_out_form"/>
            <field name="arch" type="xml">
              
                <xpath expr="//button[@name='draft_validate']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@string='Deliver']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@string='Create Invoice/Refund']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@name='draft_force_assign']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@string='Print Delivery Slip']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@name='button_cancel']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
                <xpath expr="//button[@name='action_process']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
                
<!--                <xpath expr="//button[@name='action_process']" position="after">
                    <button name="button_url" type="object" String="URL" class="oe_highlight"/>
                </xpath>-->
                
                <xpath expr="//button[@name='action_process']" position="after">
                    <button name="stock_internal_transfer" type="object" String="Print Stock Transfer" class="oe_highlight" groups="base.group_user,magicemart.magicemart_portal_manager"
                        attrs="{'invisible':[('type','not in','internal')]}"/>
                </xpath>
                
                
                <xpath expr="//button[@string='Return Products']" position="replace">
                    <button name="%(stock.act_stock_return_picking)d" string="Return Products" states="done" type="action" context="{'picking_id':active_id}"/>
                </xpath>
                
            </field>
        </record>
        
        
        <!--  Stock Return Line Wizard -->        
        <record id="m_view_stock_return_picking_form" model="ir.ui.view">
            <field name="name">M Return lines</field>
            <field name="model">stock.return.picking</field>
            <field name="inherit_id" ref="stock.view_stock_return_picking_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='invoice_state']" position="attributes">
                    <attribute name="on_change">onchange_invoicing(invoice_state,context)</attribute>
                </xpath>
            </field>
        </record>
        
                
<!--  Hide stock update button for Supplier Portal      -->
        
        <record id="m_view_normal_procurement_locations_form" model="ir.ui.view">
            <field name="name">m.product.normal.procurement.locations.inherit</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="stock.view_normal_procurement_locations_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='%(stock.action_view_change_product_quantity)d']" position="attributes">
                    <attribute name="groups">base.group_system,magicemart.magicemart_group_manager,magicemart.magicemart_group_user</attribute>
                </xpath>
            </field>
        </record>
        
        
<!--  Inheriting Internal Move Action    -->
        <record id="stock.action_picking_tree6" model="ir.actions.act_window">
            <field name="context">{'default_type':'internal','contact_display': 'partner_address'}</field>
        </record>
        
             
<!--   To Remove std Report in Print Dropdown     -->
        <delete model="ir.actions.report.xml" search="[('name','=','Delivery Slip'),('model','=','stock.picking.out')]"/>
 
 
<!-- Button For Schedular   -->
<!--        <record id="m_view_warehouse_orderpoint_form" model="ir.ui.view">
            <field name="name">m.stock.warehouse.orderpoint.form</field>
            <field name="model">stock.warehouse.orderpoint</field>
            <field name="inherit_id" ref="procurement.view_warehouse_orderpoint_form"/>
            <field name="arch" type="xml">
                <form>
                <button name="do_stock_reorder" type="object" string="Re-Ordering"/>
                </form>
            </field>
        </record>-->
        
        
        <!--	*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*. *.*.*.*.*.*.*.*.*.*.*.*.*.*.* .*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.
						Scheduler to Less Stock Notification	
		*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*. *.*.*.*.*.*.*.*.*.*.*.*.*.*.* .*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*. -->
        
        <record forcecreate="True" id="lv_run_scheduler" model="ir.cron">
            <field name="name">Less Stock Notification</field>
            <field eval="True" name="active" />
            <field name="user_id" ref="base.user_root" />
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field eval="True" name="doall" />
            <field eval="'stock.warehouse.orderpoint'" name="model" />
            <field eval="'do_stock_reorder'" name="function" />
            <field eval="'()'" name="args" />
        </record>
        
        
        
        <!--	*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*. *.*.*.*.*.*.*.*.*.*.*.*.*.*.* .*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*.*. -->
        
        
    </data>
</openerp>







